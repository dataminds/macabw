[["intro.html", "Chapter 2 Introduction", " Chapter 2 Introduction 2.0.1 기계보조 내용분석 기계를 이용한 분석의 장점은 대용량의 데이터 처리이나 분석의 정밀성이 떨어진다는 단점이 있다. 정밀한 분석은 사람이 직접 수행해야 하지만 대용량의 데이터를 처리할 수 없는 한계가 있다. 두 방법을 혼용해 기계를 이용해 대용량의 데이터에서 기본적인 분석을 수행하고, 이를 토대로 사람이 추가적으로 분석을 수행한다면 대용량의 데이터를 보다 정밀하게 분석할 수 있다. 2.0.2 지도학습, 비지도학습, 반지도학습 기계를 이용한 텍스트분석은 크게 지도학습과 비지도학습을 이용한 분류로 구분된다. 지도학습을 이용한 분류를 위해서는 대용량의 학습데이터가 필요하다. 감정어 사전을 구성해 텍스트의 감정을 분류하는 감정분석이 전형적인 지도학습이다. 감정사전의 단어의 갯수를 계산하는 단순한 방법부터 신경망 알고리듬을 이용하는 방법 등 다양한 접근이 있다. caret패키지에서 다양한 지도학습 알고리듬을 제공한다. 비지도학습은 학습데이터 없이 기계가 확률분포를 이용해 유사한 것끼리 군집한다. LDA를 이용한 텍스트군집, 주제모형분석(topic modeling)이 전형적인 비지도학습이다. topicmodels mallet stm ctm btm 등의 패키지를 이용할 수 있다. 지도학습과 비지도학습의 장점을 취한 접근이 반지도학습이다. 대용량의 학습데이터를 마련하기 보다 소규모의 씨앗 역할을 하는 단어에 기반해 기계가 군집하는 방식이다. 씨앗역할 하는 단어의 설정을 하기 위해서는 논리가 필요하므로 이론기반 토픽모델링이라 할 수 있다. seededlda keyATM 등의 패키지가 있다. (참고: keyATM은 개발자가 iOS 환경에서 작업하면서 윈도에서의 인코딩을 고려하지 않았기 때문에 한글윈도에서는 분석결과가 유니코드로 산출된다.) 2.0.3 절차 주제어확인 분석 말뭉치에 대해 비지도 토픽모델링으로 문서에 분포된 주제와 주제어를 확인한다. 씨앗주제어 설정 분석목표를 달성하는데 필요한 씨앗으로 활용할 주제어를 설정한다. 씨앗주제어사전 구성 비지도 토픽모델링으로 확보한 주제어와 분석목표에 따른 씨앗주제어를 활용해 씨앗주제어 사전을 구성한다. 반지도 토픽모델링 시행 . "],["자료준비.html", "Chapter 3 자료준비", " Chapter 3 자료준비 국내 주요 언론에서 코로나19 상황에 대한 위험과 기회를 어느 정도로 실재적인 측면을 반영하는지 가늠하기 위해, 코로나19 상황의 위험과 기회를 반영하는 주제어를 구성하고, 이 주제어를 통해 반지도학습 토픽모델링을 수행한다. 데이터는 tidyverse와 quanteda를 이용해 마련하고, LDA토픽모델링은 seededlda를 이용한다. quanteda패키지는 dfm에 메타정보를 추가하는데 사용한다. quanteda에서는 한글형태소 분석기를 사용할 수 없기 때문에, tidyverse와 tidytext로 먼저 형태소분석한 데이터프레임을 만들어 quanteda에 투입한다. . 3.0.0.1 패키지 로딩 pkg_v &lt;- c( &quot;tidyverse&quot;, &quot;tidytext&quot;, &quot;lubridate&quot;, &quot;quanteda&quot;, &quot;readtext&quot;, &quot;seededlda&quot;) purrr::map(pkg_v, require, ch = T) ## [[1]] ## [1] TRUE ## ## [[2]] ## [1] TRUE ## ## [[3]] ## [1] TRUE ## ## [[4]] ## [1] TRUE ## ## [[5]] ## [1] TRUE ## ## [[6]] ## [1] TRUE . 3.0.1 기사 자료 확보 말뭉치는 빅카인즈를 통해 확보한다. 코로나19 관련 기사를 추출하기 위해 다음의 방법을통해 기사를 검색해 다운로드 받는다. 빅카인즈는 저작권 문제로 기사는 200자만 제공하지만, 기사 전문에 대해 키워드를 제공한다. 이 키워드는 형태소 분석을 통한 추출한 명사에 해당한다. 키워드 ((코로나19) OR (코로나) OR (코로나 바이러스) OR (신종 코로나바이러스) OR (COVID-19) OR (코비드19)) 세부 설정 언론사: 경향 국민 동아 문화 서울 세계 조선 중앙 한겨레 한국 KBS MBC SBS 분류 사회: 의료건강 인사, 부고, 동정 등 제외 기간: 2021년 5월 1일부터 10월 31일 2021-05-01 ~ 2021-10-31 16,288건 (분석편의를 위해 2만건을 넘기지 않도록 했다. 빅카인즈는 한번에 2만건 까지만 다운로드를 받을 수 있도록 했다. 2만건이 넘어가면 일반 개인 컴퓨터로는 분석시간이 오래 걸리는 문제도 있다.) . 다운로드 받은 파일을 작업디렉토리의 data폴더에 복사한다. 제대로 복사돼 있는지 확인. list.files(path = &#39;data&#39;, pattern = &#39;^News.*\\\\.xlsx$&#39;) ## [1] &quot;NewsResult_20191101-20200430.xlsx&quot; &quot;NewsResult_20200501-20201031.xlsx&quot; ## [3] &quot;NewsResult_20201101-20210430.xlsx&quot; &quot;NewsResult_20210501-20211031.xlsx&quot; . 5월 ~ 10월에 해당하는 파일 선택. file_path &lt;- &quot;data/NewsResult_20210501-20211031.xlsx&quot; readxl::read_excel(file_path) %&gt;% glimpse() ## Rows: 16,288 ## Columns: 19 ## $ `뉴스 식별자` &lt;chr&gt; &quot;01100701.20211031230241001&quot;, &quot;01100201.2... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;2... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;... ## $ 기고자 &lt;chr&gt; &quot;정진수&quot;, &quot;박용미&quot;, &quot;오정현&quot;, &quot;오병상(oh.byungsang@... ## $ 제목 &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새... ## $ `통합 분류1` &lt;chr&gt; &quot;사회&gt;의료_건강&quot;, &quot;사회&gt;의료_건강&quot;, &quot;사회&gt;의료_건강&quot;, &quot;사회&gt;... ## $ `통합 분류2` &lt;chr&gt; &quot;사회&gt;여성&quot;, &quot;지역&gt;경기&quot;, &quot;사회&gt;여성&quot;, NA, &quot;지역&gt;충남&quot;, ... ## $ `통합 분류3` &lt;chr&gt; &quot;사회&gt;교육_시험&quot;, &quot;지역&gt;충남&quot;, NA, NA, &quot;사회&gt;의료_건강&quot;,... ## $ `사건/사고 분류1` &lt;chr&gt; NA, NA, NA, NA, NA, NA, &quot;범죄&gt;기업범죄&gt;거래제한&quot;, NA... ## $ `사건/사고 분류2` &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA... ## $ `사건/사고 분류3` &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA... ## $ 인물 &lt;chr&gt; &quot;김정환,이상지&quot;, &quot;이,이재훈,김용선,소강석,김근수&quot;, &quot;강영석&quot;,... ## $ 위치 &lt;chr&gt; &quot;의정부을지대학교병원,방콕&quot;, &quot;용인,경기도&quot;, &quot;한문현,전북,군산,... ## $ 기관 &lt;chr&gt; &quot;대한비만학회,BRCA,게티이미지뱅크,서울아산병원,BRCA1,선우성,... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,... ## $ `특성추출(가중치순 상위 50개)` &lt;chr&gt; &quot;대장암,유방암,고혈압,건강검진,간염,방사선,코로나19,유전자,난소암,ct,40세,코... ## $ 본문 &lt;chr&gt; &quot;게티이미지뱅크 연말이면 많은 병원이 건강검진을 받으려는 사람들도 북... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2... ## $ `분석제외 여부` &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA... . 분석에 필요한 열만 선택한다. readxl::read_excel(file_path) %&gt;% select(일자, 제목, 본문, 키워드, 언론사, cat = `통합 분류1`, URL) -&gt; vac_df vac_df %&gt;% head(3) ## # A tibble: 3 x 7 ## 일자 제목 본문 키워드 언론사 cat URL ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; ## 1 20211~ 길어진 방콕에 확 늘~ &quot;게티이미지뱅크 연말이면~ 방콕,몸무게,심혈관질환,게~ 세계일보~ 사회&gt;의료~ http://www.s~ ## 2 20211~ 새에덴교회, 칼빈대 ~ &quot;경기도 용인 새에덴교회~ 새에덴교회,칼빈대,교직원,~ 국민일보~ 사회&gt;의료~ http://news.~ ## 3 20211~ 전북, ‘단계적 일상~ &quot;[KBS 전주]\\n [~ 전북,단계,일상회복,집단,~ KBS 사회&gt;의료~ https://news~ . 정제. 불용어 부호 중복기사 공백 등 제거 fullchar_v &lt;- &quot;ㆍ|ㅣ|‘|’|“|”|||||||||||||||||||||||||&quot; vac_df %&gt;% # 인터뷰 기고 등 제거 filter(!str_detect(제목, &quot;( \\\\[인터뷰|\\\\인터뷰\\\\]| \\\\[전문|전문\\\\]| \\\\[기고|기고\\\\]| \\\\[Q|A\\\\]| \\\\[논담|논담\\\\]| \\\\[좌담회|좌담회\\\\]| 답\\\\&gt;| 답\\\\]| \\\\&lt;파워| \\\\[사람|사람\\\\]| \\\\[탐방|탐방\\\\]| \\\\[속보|속보\\\\]| \\\\[팩트| \\\\[브리핑|브리핑\\\\]| \\\\[시평|시평\\\\]| )&quot;)) %&gt;% # 중복기사 제거 distinct(제목, .keep_all = T) %&gt;% # 기사 공백제거 mutate(제목 = str_squish(제목)) %&gt;% # 기사 공백제거 mutate(본문 = str_squish(본문)) %&gt;% # 특수문자 제거 mutate(키워드 = str_remove_all(키워드, &quot;[^(\\\\w+|\\\\d+|,)]&quot;)) %&gt;% mutate(키워드 = str_remove_all(키워드, fullchar_v)) %&gt;% # 기사별 ID부여 mutate(ID = factor(row_number())) %&gt;% # 월별로 구분한 열 추가(lubridate 패키지) %&gt;% mutate(ym = str_sub(일자, 1, 6)) %&gt;% mutate(ym = as.integer(ym)) %&gt;% mutate(title = 제목) %&gt;% # 기사 제목과 본문 결합 unite(제목, 본문, col = &quot;text&quot;, sep = &quot; &quot;) %&gt;% #키워드 갯수 계산 mutate(Nword = str_count(키워드, pattern = &#39;,&#39;)) %&gt;% relocate(Nword, after = 일자) %&gt;% # 기사 분류 구분 separate(cat, sep = &quot;&gt;&quot;, into = c(&quot;cat&quot;, &quot;cat2&quot;)) %&gt;% # IT_과학, 경제, 사회 만 선택 select(-cat2) %&gt;% # 분류 구분: 사회, 비사회 relocate(cat, after = Nword) %&gt;% mutate(catSoc = case_when( cat == &quot;사회&quot; ~ &quot;사회면&quot;, cat == &quot;지역&quot; ~ &quot;사회면&quot;, TRUE ~ &quot;비사회면&quot;) ) -&gt; vac2_df vac2_df %&gt;% glimpse() ## Rows: 15,553 ## Columns: 11 ## $ cat &lt;chr&gt; &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;지역&quot;, &quot;지역&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;IT_과학&quot;, &quot;사회... ## $ Nword &lt;int&gt; 462, 79, 114, 163, 135, 132, 172, 53, 282, 180, 181, 263, 14... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;2... ## $ text &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을 ... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로나,시... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;경향신... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2021/10/31/20211031508024... ## $ ID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1... ## $ ym &lt;int&gt; 202110, 202110, 202110, 202110, 202110, 202110, 202110, 2021... ## $ title &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새에덴교회, 칼빈대 교직원에 독감 예방접종... ## $ catSoc &lt;chr&gt; &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;비사회... . 정제 데이터 확인 vac2_df$ym %&gt;% unique() ## [1] 202110 202109 202108 202107 202106 202105 . 사회 분류의 의료_건강만 선택했지만, 다른 영역의 기사도 포함된다. vac2_df %&gt;% count(cat, sort = T) ## # A tibble: 8 x 2 ## cat n ## &lt;chr&gt; &lt;int&gt; ## 1 사회 11914 ## 2 지역 1468 ## 3 국제 1097 ## 4 IT_과학 434 ## 5 문화 234 ## 6 정치 219 ## 7 경제 177 ## 8 스포츠 10 . 기사 길이 확인 vac2_df %&gt;% .$Nword %&gt;% summary() ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## 7.0 123.0 158.0 179.5 219.0 1527.0 . 기사의 길이가 일정 수준까지는 기사의 품질과 정비례의 관계가 있다는 전제하에 단어수가 70개 이상한 기사만 선택. vac2_df %&gt;% filter(Nword &gt;= 70) -&gt; vac2_df vac2_df %&gt;% .$Nword %&gt;% summary() ## Min. 1st Qu. Median Mean 3rd Qu. Max. ## 70.0 130.0 164.0 189.1 225.0 1527.0 . tidytext 방식으로 토큰화. vac2_df %&gt;% unnest_tokens(word, 키워드, token = &quot;regex&quot;, pattern = &quot;,&quot;) -&gt; vac_tk vac_tk %&gt;% select(ym, title, word) %&gt;% head(n = 5) ## # A tibble: 5 x 3 ## ym title word ## &lt;int&gt; &lt;chr&gt; &lt;chr&gt; ## 1 202108 “백신예약 대란 없었다” LG CNS, 병목 현상 90% 이상 개선 완료 백신예약 ## 2 202108 “백신예약 대란 없었다” LG CNS, 병목 현상 90% 이상 개선 완료 lg ## 3 202108 “백신예약 대란 없었다” LG CNS, 병목 현상 90% 이상 개선 완료 cns ## 4 202108 “백신예약 대란 없었다” LG CNS, 병목 현상 90% 이상 개선 완료 90 ## 5 202108 “백신예약 대란 없었다” LG CNS, 병목 현상 90% 이상 개선 완료 개선 . 토큰 빈도 계산 vac_tk %&gt;% count(word, sort = T) -&gt; count_df count_df %&gt;% head(n = 10) ## # A tibble: 10 x 2 ## word n ## &lt;chr&gt; &lt;int&gt; ## 1 접종 113809 ## 2 백신 96320 ## 3 코로나19 42458 ## 4 확진자 28675 ## 5 감염 21406 ## 6 환자 17946 ## 7 정부 16702 ## 8 예약 14485 ## 9 방역 13600 ## 10 발생 13562 . tidytext방식(한 행에 하나의 값 배치)의 토큰을 각 기사의 행에 재배치 text2열에 할당한다. 다른 변수가 포함된 데이터프레임과 결합. quanteda로 dfm을 만들기 위해 필요한 작업. dfm에 개별 기사에 대한 변수가 포함돼 있어야 추가적인 분석이 가능하다. combined_df &lt;- vac_tk %&gt;% group_by(ID) %&gt;% summarise(text2 = str_flatten(word, &quot; &quot;)) %&gt;% ungroup() %&gt;% inner_join(vac2_df, by = &quot;ID&quot;) ## `summarise()` ungrouping output (override with `.groups` argument) combined_df %&gt;% glimpse() ## Rows: 14,508 ## Columns: 12 ## $ ID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, ... ## $ text2 &lt;chr&gt; &quot;방콕 몸무게 심혈관질환 게티 이미지 뱅크 연말 병원 건강검진 사람들 북새통 예약 대기 사례 1일 위드 코로... ## $ cat &lt;chr&gt; &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;지역&quot;, &quot;지역&quot;, &quot;사회&quot;, &quot;IT_과학&quot;, &quot;사회&quot;, &quot;사회... ## $ Nword &lt;int&gt; 462, 79, 114, 163, 135, 132, 172, 282, 180, 181, 263, 147, 1... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;2... ## $ text &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을 ... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로나,시... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;경향신문&quot;, &quot;KB... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2021/10/31/20211031508024... ## $ ym &lt;int&gt; 202110, 202110, 202110, 202110, 202110, 202110, 202110, 2021... ## $ title &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새에덴교회, 칼빈대 교직원에 독감 예방접종... ## $ catSoc &lt;chr&gt; &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;비사회면&quot;, &quot;사회... . . . "],["분석.html", "Chapter 4 분석 4.1 반지도LDA", " Chapter 4 분석 먼저 비지도 LDA로 토픽을 군집한 다음, 씨앗주제사전을 만들어, 반지도 LDA로 토픽을 군집한다. 이를 위해서는 먼저 quanteda패키지로 DFM(Data Feature Matrix)를 만들어야 한다. quanteda패키지의 DFM은 topicmodels패키지에서 사용하는 DTM(Data Term Matrix)에 해당한다. 행에 개별 단어(data), 열에는 주제(feature 또는 term)이 배치된 행렬(matrix)데이터다. . 4.0.0.1 말뭉치 먼저 말뭉치를 만든다음, dfm을 만든다. quanteda패키지로 말뭉치를 만든다. text2열에 토큰화한 값이 있다. https://tutorials.quanteda.io/basic-operations/dfm/dfm/ combined_df %&gt;% corpus(text_field = &quot;text2&quot;) -&gt; c_corp c_corp %&gt;% glimpse() ## &#39;corpus&#39; Named chr [1:14508] &quot;방콕 몸무게 심혈관질환 게티 이미지 뱅크 연말 병원 건강검진 사람들 북새통 예약 대기 사례 1일 위드 코로나 시행 감&quot;| __truncated__ ... ## - attr(*, &quot;names&quot;)= chr [1:14508] &quot;text1&quot; &quot;text2&quot; &quot;text3&quot; &quot;text4&quot; ... ## - attr(*, &quot;docvars&quot;)=&#39;data.frame&#39;: 14508 obs. of 14 variables: ## ..$ docname_: chr [1:14508] &quot;text1&quot; &quot;text2&quot; &quot;text3&quot; &quot;text4&quot; ... ## ..$ docid_ : Factor w/ 14508 levels &quot;text1&quot;,&quot;text2&quot;,..: 1 2 3 4 5 6 7 8 9 10 ... ## ..$ segid_ : int [1:14508] 1 1 1 1 1 1 1 1 1 1 ... ## ..$ ID : Factor w/ 15553 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 3 4 5 6 7 9 10 11 ... ## ..$ cat : chr [1:14508] &quot;사회&quot; &quot;사회&quot; &quot;사회&quot; &quot;사회&quot; ... ## ..$ Nword : int [1:14508] 462 79 114 163 135 132 172 282 180 181 ... ## ..$ 일자 : chr [1:14508] &quot;20211031&quot; &quot;20211031&quot; &quot;20211031&quot; &quot;20211031&quot; ... ## ..$ text : chr [1:14508] &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을 받으려&quot;| __truncated__ &quot;새에덴교회, 칼빈대 교직원에 독감 예방접종 봉사 경기도 용인 새에덴교회(소강석 목사) 산하 메디컬처치(위원장 김용&quot;| __truncated__ &quot;전북, ‘단계적 일상회복’ 앞두고 집단감염 지속 [KBS 전주] [앵커] 전북에서 코로나19 확진자가 34명 늘었습니다. 곳&quot;| __truncated__ &quot;[오병상의 코멘터리] 위드코로나..‘최악의 겨울’될까?  핼러윈 맞은 이태원 풍경에..  코로나대응 공동체의식 희&quot;| __truncated__ ... ## ..$ 키워드 : chr [1:14508] &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로나,시행,감&quot;| __truncated__ &quot;새에덴교회,칼빈대,교직원,봉사,독감,예방,접종,새에덴교회,경기도,용인,소강석,목사,산하,메디컬처치,위원장,김용선,&quot;| __truncated__ &quot;전북,단계,일상회복,집단,감염,지속,앵커,전북,코로나19,확진자,34명,집단감염,단계,일상,회복,시작,오정현,리포트,재&quot;| __truncated__ &quot;위드코,최악,겨울,핼러윈,이태원,풍경,희박,코로나대응,공동체,의식,코로나,1,위드,corona,시작,주말,핼러윈,파티,젊은&quot;| __truncated__ ... ## ..$ 언론사 : chr [1:14508] &quot;세계일보&quot; &quot;국민일보&quot; &quot;KBS&quot; &quot;중앙일보&quot; ... ## ..$ URL : chr [1:14508] &quot;http://www.segye.com/content/html/2021/10/31/20211031508024.html&quot; &quot;http://news.kmib.co.kr/article/view.asp?arcid=0016419698&amp;code=61171811&amp;cp=kd&quot; &quot;https://news.kbs.co.kr/news/view.do?ncd=5313648&amp;amp;ref=DA&quot; &quot;https://www.joongang.co.kr/article/25019705&quot; ... ## ..$ ym : int [1:14508] 202110 202110 202110 202110 202110 202110 202110 202110 202110 202110 ... ## ..$ title : chr [1:14508] &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot; &quot;새에덴교회, 칼빈대 교직원에 독감 예방접종 봉사&quot; &quot;전북, ‘단계적 일상회복’ 앞두고 집단감염 지속&quot; &quot;[오병상의 코멘터리] 위드코로나..‘최악의 겨울’될까?&quot; ... ## ..$ catSoc : chr [1:14508] &quot;사회면&quot; &quot;사회면&quot; &quot;사회면&quot; &quot;사회면&quot; ... ## - attr(*, &quot;meta&quot;)=List of 3 ## ..$ system:List of 6 ## .. ..$ package-version:Classes &#39;package_version&#39;, &#39;numeric_version&#39; hidden list of 1 ## .. ..$ r-version :Classes &#39;R_system_version&#39;, &#39;package_version&#39;, &#39;numeric_version&#39; hidden list of 1 ## .. ..$ system : Named chr [1:3] &quot;Windows&quot; &quot;x86-64&quot; &quot;ahnsa&quot; ## .. .. ..- attr(*, &quot;names&quot;)= chr [1:3] &quot;sysname&quot; &quot;machine&quot; &quot;user&quot; ## .. ..$ directory : chr &quot;D:/data/textData/macabw&quot; ## .. ..$ created : Date[1:1], format: &quot;2021-11-20&quot; ## .. ..$ source : chr &quot;data.frame&quot; ## ..$ object:List of 2 ## .. ..$ unit : chr &quot;documents&quot; ## .. ..$ summary:List of 2 ## ..$ user : list() . 말뭉치의 내용을 보다 간결하게 보기 위해서는 docvars()함수를 이용한다. c_corp %&gt;% docvars() %&gt;% glimpse() ## Rows: 14,508 ## Columns: 11 ## $ ID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, ... ## $ cat &lt;chr&gt; &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;지역&quot;, &quot;지역&quot;, &quot;사회&quot;, &quot;IT_과학&quot;, &quot;사회&quot;, &quot;사회... ## $ Nword &lt;int&gt; 462, 79, 114, 163, 135, 132, 172, 282, 180, 181, 263, 147, 1... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;2... ## $ text &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을 ... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로나,시... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;경향신문&quot;, &quot;KB... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2021/10/31/20211031508024... ## $ ym &lt;int&gt; 202110, 202110, 202110, 202110, 202110, 202110, 202110, 2021... ## $ title &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새에덴교회, 칼빈대 교직원에 독감 예방접종... ## $ catSoc &lt;chr&gt; &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;비사회면&quot;, &quot;사회... . 4.0.1 DFM 구성 dfm을 구성할 때 dfm()함수만을 이용하기도 하지만, dfm_trim()함수를 추가로 투입해 분석대상을 추려냄으로써 추출한 주제의 변별성을 높일 수 있다. 자세한 내용은 매뉴얼(https://quanteda.io/reference/dfm_trim.html) 참조. 여기서는 가장 빈번한 feature 5%를 추렸다. feature의 문서빈도 값을 10% 미만(max_docfreq = 0.1)으로 설정하고, 모든 문서의 feature 빈도 80% 이상(min_termfreq = 0.8)으로 설정. topfeatures() 함수를 이용해 가장 빈번하게 등장하는 feature를 확인할 수 있따. tokens() 함수를 이용해 불용어나 구두점 등 정제작업을 할수 있다. 이미 앞 단계에서 정제 작업을 수행했기 때문에 여기서는 사용하지 않는다. c_corp %&gt;% #tokens(remove_punct = T) %&gt;% dfm() %&gt;% dfm_trim(min_termfreq = 0.8, # termfreq_type = &quot;quantile&quot;, max_docfreq = 0.1, docfreq_type = &quot;prop&quot;) -&gt; c_dfm c_dfm %&gt;% topfeatures(n = 20) ## 병상 회분 건 부스터 추석 인력 씨 연휴 ## 4698 3934 3566 3533 3225 3097 2955 2949 ## 천 a 격리 신고 청소년 부스터샷 위드 승인 ## 2852 2823 2803 2795 2760 2690 2684 2511 ## 임상 연령 항체 감염병 ## 2485 2460 2453 2407 . 4.0.2 비지도 LDA 먼저 비지도 LDA를 수행해 보도된 기사의 주제가 어떻게 군집되는지 확인한다. 여기서는 주제를 편의상 16개 (k = 16)로 설정했다. set.seed(37) c_dfm %&gt;% textmodel_lda(k = 16) -&gt; c_lda c_lda %&gt;% glimpse() ## List of 9 ## $ k : int 16 ## $ iter : int 2000 ## $ alpha : num 0.5 ## $ beta : num 0.1 ## $ phi : num [1:16, 1:13073] 1.98e-06 5.81e-05 1.15e-06 1.14e-06 1.18e-06 ... ## ..- attr(*, &quot;dimnames&quot;)=List of 2 ## .. ..$ : chr [1:16] &quot;topic1&quot; &quot;topic2&quot; &quot;topic3&quot; &quot;topic4&quot; ... ## .. ..$ : chr [1:13073] &quot;방콕&quot; &quot;몸무게&quot; &quot;심혈관질환&quot; &quot;게티&quot; ... ## $ theta : num [1:14508, 1:16] 0.00178 0.03125 0.00769 0.035 0.01875 ... ## ..- attr(*, &quot;dimnames&quot;)=List of 2 ## .. ..$ : chr [1:14508] &quot;text1&quot; &quot;text2&quot; &quot;text3&quot; &quot;text4&quot; ... ## .. ..$ : chr [1:16] &quot;topic1&quot; &quot;topic2&quot; &quot;topic3&quot; &quot;topic4&quot; ... ## $ x :Formal class &#39;dfm&#39; [package &quot;quanteda&quot;] with 8 slots ## .. ..@ docvars :&#39;data.frame&#39;: 14508 obs. of 14 variables: ## .. ..@ meta :List of 3 ## .. ..@ i : int [1:982813] 0 199 207 1259 2421 2481 7347 7611 7624 7626 ... ## .. ..@ p : int [1:13074] 0 22 76 97 112 169 186 334 398 412 ... ## .. ..@ Dim : int [1:2] 14508 13073 ## .. ..@ Dimnames:List of 2 ## .. ..@ x : num [1:982813] 1 2 1 1 1 2 1 8 10 4 ... ## .. ..@ factors : list() ## $ max_iter: int 2000 ## $ call : language lda(x = x, k = k, label = label, max_iter = max_iter, alpha = alpha, beta = beta, seeds = NULL, verbose = verbose) ## - attr(*, &quot;class&quot;)= chr [1:3] &quot;textmodel_lda&quot; &quot;textmodel&quot; &quot;list&quot; 14,508개 문서의 982,813개의 단어에서 13,973개 단어를 16개의 주제로 분류했다. phi열의 값이 토픽x단어 행렬이다. topicmodels나 stm패키지의 beta에 해당한다. 각 각 단어가 토픽별 할당되는 확률 값이다. theta열의 값이 문서x토픽 행렬이다. topicmodels나 stm패키지의 gamma에 해당한다. 각 문서가 토픽별로 포함될 확률 값이다. . 8개의 주제별로 전형적인 단어 10개(n = 10)를 추출해보자. 토픽별 단어의 phi값을 내림차순으로 산출한다. c_lda %&gt;% terms(n = 10) %&gt;% as.data.frame() %&gt;% select(topic1:topic8) ## topic1 topic2 topic3 topic4 topic5 topic6 topic7 topic8 ## 1 청해부대 부스터 씨 식당 방대본 진료 위드 외국인 ## 2 장병 부스터샷 a 허용 돌파감염 서비스 전환 집단감염 ## 3 국방부 cdc 호소 인센티브 감염자 의사 달성 부산 ## 4 부대 이스라엘 청원 카페 전파력 치매 체계 직원 ## 5 격리 fda 아버지 면제 추정 한국 전문가들 대구 ## 6 현지 승인 남편 입국 위중증 정보 내과 경남 ## 7 음성 의무 여성 패스 미접종자 활동 독감 접촉자 ## 8 pcr 현지시간 어머니 인 인도 대표 반장 접촉 ## 9 사태 세계 아들 증명서 전파 세계 전략 학원 ## 10 파병 의무화 청원인 격리 건 사업 집단면역 서울시 c_lda %&gt;% terms(n = 10) %&gt;% as.data.frame() %&gt;% select(topic9:topic16) ## topic9 topic10 topic11 topic12 topic13 topic14 topic15 topic16 ## 1 임상 질환 인력 추석 회분 청소년 병상 건 ## 2 항체 운동 간호사 연휴 수급 잔여 재택 신고 ## 3 치료제 수술 공공 천 간격 학생 전담 이상반응 ## 4 시험 임신부 노조 비수도권 상반기 살 개 혈전증 ## 5 허가 임신 파업 연속 차질 학교 재택치료 인정 ## 6 교차 원인 감염병 주말 오접종 임신부 격리 인과성 ## 7 인도 음식 휴가 영상편집 계약 소아 생활치료센터 심근염 ## 8 승인 섭취 요구 최다 연령 당일 생활 의심 ## 9 식약처 여성 확충 위중증 모더나 사전예약 이송 보상 ## 10 연구진 도움 보험 비수도 예약자 잔여백신 경증 남성 . topic9를 phi값의 내림차 순으로 정렬해보면 topic1의 단어가 동일하게 산출된다. c_lda$phi %&gt;% t() %&gt;% as.data.frame() %&gt;% arrange(topic9 %&gt;% desc) %&gt;% round(digits = 3) %&gt;% head(10) ## topic1 topic2 topic3 topic4 topic5 topic6 topic7 topic8 topic9 topic10 ## 임상 0.000 0.000 0 0 0.000 0 0.000 0 0.033 0.000 ## 항체 0.001 0.001 0 0 0.002 0 0.001 0 0.027 0.000 ## 치료제 0.000 0.000 0 0 0.000 0 0.001 0 0.018 0.000 ## 시험 0.000 0.000 0 0 0.000 0 0.000 0 0.016 0.000 ## 허가 0.000 0.000 0 0 0.000 0 0.000 0 0.014 0.000 ## 교차 0.000 0.000 0 0 0.001 0 0.000 0 0.014 0.000 ## 인도 0.000 0.000 0 0 0.007 0 0.000 0 0.012 0.000 ## 승인 0.000 0.015 0 0 0.000 0 0.000 0 0.009 0.000 ## 식약처 0.000 0.000 0 0 0.000 0 0.000 0 0.008 0.000 ## 연구진 0.000 0.000 0 0 0.000 0 0.000 0 0.007 0.001 ## topic11 topic12 topic13 topic14 topic15 topic16 ## 임상 0 0 0.000 0.000 0 0.000 ## 항체 0 0 0.000 0.000 0 0.000 ## 치료제 0 0 0.000 0.000 0 0.000 ## 시험 0 0 0.000 0.003 0 0.000 ## 허가 0 0 0.001 0.002 0 0.000 ## 교차 0 0 0.002 0.000 0 0.001 ## 인도 0 0 0.000 0.000 0 0.000 ## 승인 0 0 0.000 0.000 0 0.000 ## 식약처 0 0 0.000 0.000 0 0.000 ## 연구진 0 0 0.000 0.000 0 0.000 각 토픽 단어를 통해 각 토픽의 제목을 다음과 같이 부여할 수 있다. topic1: 청해부대 감염 topic2: 세계 추가접종 topic3: 이상반응 청원 topic4: 일상회복 topic5: 돌파감염 topic6: 기타:진료활동 topic7: 집단면역 topic8: 집단감염 topic9: 치료제 승인 topic10: 기타: 건강 topic11: 기타: 노동 topic12: 연휴 감염 topic13: 백신수급 topic14: 백신접종 topic15: 치료 topic16: 이상반응 . 문서x토픽 행렬인 theta는 다음과 같다. c_lda$theta %&gt;% as.data.frame() -&gt; clda_theta_df clda_theta_df %&gt;% select(topic1:topic8) %&gt;% round(digits = 3) %&gt;% head(3) ## topic1 topic2 topic3 topic4 topic5 topic6 topic7 topic8 ## text1 0.002 0.002 0.044 0.002 0.012 0.109 0.037 0.005 ## text2 0.031 0.010 0.031 0.010 0.010 0.385 0.240 0.010 ## text3 0.008 0.008 0.008 0.069 0.023 0.023 0.069 0.562 . c_lda$theta %&gt;% as.data.frame() -&gt; clda_theta_df clda_theta_df %&gt;% select(topic9:topic16) %&gt;% round(digits = 3) %&gt;% head(3) ## topic9 topic10 topic11 topic12 topic13 topic14 topic15 topic16 ## text1 0.002 0.763 0.002 0.005 0.002 0.002 0.002 0.009 ## text2 0.010 0.010 0.010 0.010 0.031 0.135 0.010 0.052 ## text3 0.008 0.008 0.008 0.008 0.038 0.085 0.069 0.008 . text3은 topic8(집단감염)에 속할 확률이 0.562이고, 다른 토픽에 속할 확률은 0.002에서 0.085다. . text3이 어떤 문서인지 해당 기사를 선택해 보자. 이를 위해서는 토픽모델링 산출물의 각 주제와 앞서 구성한 말뭉치를 결합해야 한다. 이를 위해 산출물에서 문서별 주제 할당 확률값인 theta 정보를 데이터프레임으로 저장하고, 말뭉치에서 변수(열)를 추출해 데이터프레임으로 저장. 먼저 토픽모델링 산출물에서 문서별 theta 값 추출. 벡터이므로 데이터프레임으로 변환. 말뭉치의 docvars()함수로 기사의 변수(열) 추출해 데이터프레임으로 저장. c_corp %&gt;% docvars() -&gt; docvars_df docvars_df %&gt;% glimpse() ## Rows: 14,508 ## Columns: 11 ## $ ID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, ... ## $ cat &lt;chr&gt; &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;지역&quot;, &quot;지역&quot;, &quot;사회&quot;, &quot;IT_과학&quot;, &quot;사회&quot;, &quot;사회... ## $ Nword &lt;int&gt; 462, 79, 114, 163, 135, 132, 172, 282, 180, 181, 263, 147, 1... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;2... ## $ text &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을 ... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로나,시... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;경향신문&quot;, &quot;KB... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2021/10/31/20211031508024... ## $ ym &lt;int&gt; 202110, 202110, 202110, 202110, 202110, 202110, 202110, 2021... ## $ title &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새에덴교회, 칼빈대 교직원에 독감 예방접종... ## $ catSoc &lt;chr&gt; &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;비사회면&quot;, &quot;사회... . 두 데이터프레임 결합 bind_cols(docvars_df, clda_theta_df) %&gt;% mutate(textID = factor(row_number()), .before = ID) -&gt; theta_df theta_df %&gt;% glimpse() ## Rows: 14,508 ## Columns: 28 ## $ textID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, ... ## $ ID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,... ## $ cat &lt;chr&gt; &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;지역&quot;, &quot;지역&quot;, &quot;사회&quot;, &quot;IT_과학&quot;, &quot;사회&quot;, &quot;사... ## $ Nword &lt;int&gt; 462, 79, 114, 163, 135, 132, 172, 282, 180, 181, 263, 147, ... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;... ## $ text &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로나,... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;경향신문&quot;, &quot;K... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2021/10/31/2021103150802... ## $ ym &lt;int&gt; 202110, 202110, 202110, 202110, 202110, 202110, 202110, 202... ## $ title &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새에덴교회, 칼빈대 교직원에 독감 예방접... ## $ catSoc &lt;chr&gt; &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;비사회면&quot;, &quot;사... ## $ topic1 &lt;dbl&gt; 0.001779359, 0.031250000, 0.007692308, 0.035000000, 0.01875... ## $ topic2 &lt;dbl&gt; 0.001779359, 0.010416667, 0.007692308, 0.085000000, 0.00625... ## $ topic3 &lt;dbl&gt; 0.044483986, 0.031250000, 0.007692308, 0.015000000, 0.00625... ## $ topic4 &lt;dbl&gt; 0.001779359, 0.010416667, 0.069230769, 0.045000000, 0.23125... ## $ topic5 &lt;dbl&gt; 0.012455516, 0.010416667, 0.023076923, 0.005000000, 0.10625... ## $ topic6 &lt;dbl&gt; 0.108540925, 0.385416667, 0.023076923, 0.155000000, 0.08125... ## $ topic7 &lt;dbl&gt; 0.037366548, 0.239583333, 0.069230769, 0.545000000, 0.15625... ## $ topic8 &lt;dbl&gt; 0.005338078, 0.010416667, 0.561538462, 0.005000000, 0.29375... ## $ topic9 &lt;dbl&gt; 0.001779359, 0.010416667, 0.007692308, 0.015000000, 0.00625... ## $ topic10 &lt;dbl&gt; 0.763345196, 0.010416667, 0.007692308, 0.005000000, 0.00625... ## $ topic11 &lt;dbl&gt; 0.001779359, 0.010416667, 0.007692308, 0.005000000, 0.00625... ## $ topic12 &lt;dbl&gt; 0.005338078, 0.010416667, 0.007692308, 0.065000000, 0.01875... ## $ topic13 &lt;dbl&gt; 0.001779359, 0.031250000, 0.038461538, 0.005000000, 0.00625... ## $ topic14 &lt;dbl&gt; 0.001779359, 0.135416667, 0.084615385, 0.005000000, 0.00625... ## $ topic15 &lt;dbl&gt; 0.001779359, 0.010416667, 0.069230769, 0.005000000, 0.00625... ## $ topic16 &lt;dbl&gt; 0.008896797, 0.052083333, 0.007692308, 0.005000000, 0.04375... theta_df %&gt;% writexl::write_xlsx(&quot;theta_df.xlsx&quot;) theta_df %&gt;% saveRDS(&quot;theta_df.rds&quot;) text3의 기사가 topic8(집단감염)에 포함될만 한지 다른 기사(text1)와 비교 theta_df %&gt;% filter(textID == 1 | textID == 3) %&gt;% pull(text) ## [1] &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검진을 받으려는 사람들도 북새통을 이룬다. 예약이 꽉 차 한 달 이상 대기하는 사례도 많다. 특히 1일부터는 ‘위드 코로나’가 시행되면서 신종 코로나바이러스 감염증(코로나19)으로 병원 방문과 건강검진을 미루던 사람들이 더 많이 몰릴 것으로 보인다. 그러나 건강검진은 “받았다”는 사실만으로 만족하고 끝내면 ..&quot; ## [2] &quot;전북, ‘단계적 일상회복’ 앞두고 집단감염 지속 [KBS 전주] [앵커] 전북에서 코로나19 확진자가 34명 늘었습니다. 곳곳에서 집단감염이 이어지고 있는 가운데, 내일(1)부터 단계적 일상회복이 시작됩니다. 오정현 기자입니다. [리포트] 전라북도 감염 재생산지수는 일주일째 &#39;유행 확산&#39; 기준인 1을 웃돌고 있습니다. 크고 작은 집단감염이 곳곳에서 끊이지 않은 탓입니다. 군..&quot; 개별 문서가 설정한 토픽에 해당할 확률의 총합은 1이다. 따라서 각 문서행 별로 토픽에 해당하는 확률을 모두 더하면 1이 된다. (참고: purrr패키지의 pmap()함수는 행을 순차적으로 계산.) theta_df %&gt;% select(topic1:topic16) %&gt;% pmap(sum) %&gt;% head(3) ## [[1]] ## [1] 1 ## ## [[2]] ## [1] 1 ## ## [[3]] ## [1] 1 토픽별로 할당된 확률을 더하면 각 토픽이 말뭉치에서 등장하는 정도를 파악할 수 있다. theta_df %&gt;% select(topic1:topic16) %&gt;% map_dfc(sum) %&gt;% t() %&gt;% as.data.frame() %&gt;% arrange(V1 %&gt;% desc) ## V1 ## topic12 1286.2615 ## topic2 1284.1241 ## topic13 1171.6489 ## topic8 1120.7585 ## topic7 1093.5203 ## topic14 1055.4699 ## topic5 956.8921 ## topic3 898.0791 ## topic4 864.5295 ## topic16 774.2715 ## topic9 742.7447 ## topic6 721.8309 ## topic11 676.1684 ## topic15 674.4851 ## topic10 659.5282 ## topic1 527.6871 말뭉치에서 자주 등장하는 토픽이 topic 12(연휴감염), 2(세계 추가접종), 13(백신수급) 등이다. topic12(연휴감염세계 추가접종)에 속할 확률이 높은 기사를 추리면 다음과 같다. theta_df %&gt;% arrange(topic12 %&gt;% desc) %&gt;% pull(title) %&gt;% head(5) ## [1] &quot;다시 2000명 안팎 수도권 이미 재확산 국면 진입&quot; ## [2] &quot;확진자 1500명 육박 사흘 연속 요일 최대 확진자&quot; ## [3] &quot;79일째 네 자릿수 수도권 환자 계속 증가&quot; ## [4] &quot;월요일인데 1500명 육박 ‘또 최다’ “곧 2000명대” 우려&quot; ## [5] &quot;코로나19 신규확진 1673명 11일만에 2천명 아래&quot; . 4.1 반지도LDA 반지도학습 방식의 토픽모델링은 미리 구성한 주제어를 이용해 토픽을 군집하는 분석방법이다. 먼저 투입할 주제어사전을 구성한다. 4.1.1 씨앗주제어 사전 구성 비지도LDA로 구성한 토픽의 주제어를 이용해 씨앗주제어사전을 구성한다. c_lda %&gt;% terms(n = 5) %&gt;% as.data.frame() -&gt; c_ldaterm5_df c_lda %&gt;% terms(n = 40) %&gt;% as.data.frame() %&gt;% writexl::write_xlsx(&quot;ldaterms.xlsx&quot;) 16개 토픽중 코로나19와 관련이 없는 토픽은 그대로 두고, 코로나19 관련 토픽의 단어만 재구성. topic1: 청해부대 감염 topic2: 세계 추가접종 topic3: 이상반응 청원 topic4: 일상회복 topic5: 돌파감염 topic6: 기타:진료활동 topic7: 집단면역 topic8: 집단감염 topic9: 치료제 승인 topic10: 기타: 건강 topic11: 기타: 노동 topic12: 연휴 감염 topic13: 백신수급 topic14: 백신접종 topic15: 치료 topic16: 이상반응 재구성하는 토픽은 위험(코로나19 감염, 허위정보), 유령위험(이상반응), 대응(백신접종, 병상, 검사) 관련어 5개로 구성 사전은 quanteda패키지의 dictionary()함수로 구성한다. https://quanteda.io/reference/dictionary.html c_ldaterm5_df %&gt;% select(topic6, topic9, topic10, topic11) %&gt;% as.list() -&gt; ldaterm_noncovid_l list( risk1감염 = c(&quot;감염&quot;, &quot;위중증&quot;, &quot;중증&quot;, &quot;사망&quot;, &quot;중환자&quot;), #risk2허위 = c(&quot;허위정보&quot;, &quot;가짜뉴스&quot;, &quot;음모&quot;,&quot;음모론&quot;, &quot;조작정보&quot;), risk3이상 = c(&quot;이상반응&quot;, &quot;부작용&quot;, &quot;혈전&quot;, &quot;혈전증&quot;, &quot;심근염&quot;), resp1검사 = c(&quot;진단&quot;, &quot;검사&quot;, &quot;진단검사&quot;, &quot;선별&quot;, &quot;진단&quot;), resp2백신 = c(&quot;백신&quot;, &quot;접종&quot;, &quot;추가접종&quot;, &quot;부스터&quot;, &quot;부스터샷&quot;), resp3병상 = c(&quot;병상&quot;, &quot;의료기관&quot;, &quot;병원&quot;, &quot;보건소&quot;, &quot;병실&quot;) ) -&gt; ldaterm_covid_l c(ldaterm_noncovid_l, ldaterm_covid_l) -&gt; ldaterm_l dictionary(ldaterm_l) -&gt; dict_topic . 4.1.2 seededlda 씨앗주제어사전을 투입해 반지도학습 LDA 수행. 분석결과는 terms()함수로 각 토픽 별로 10개씩 출력. set.seed(37) Sys.time() -&gt; t1 c_dfm %&gt;% textmodel_seededlda(dictionary = dict_topic) -&gt; c_slda Sys.time() -&gt; t2 t2 - t1 ## Time difference of 2.775152 mins terms(c_slda, 10) ## topic6 topic9 topic10 topic11 risk1감염 risk3이상 resp1검사 ## [1,] &quot;의사&quot; &quot;임상&quot; &quot;질환&quot; &quot;인력&quot; &quot;위중증&quot; &quot;이상반응&quot; &quot;선별&quot; ## [2,] &quot;진료&quot; &quot;항체&quot; &quot;임신부&quot; &quot;간호사&quot; &quot;중환자&quot; &quot;혈전증&quot; &quot;진단검사&quot; ## [3,] &quot;한국&quot; &quot;시험&quot; &quot;수술&quot; &quot;공공&quot; &quot;추석&quot; &quot;심근염&quot; &quot;외국인&quot; ## [4,] &quot;서비스&quot; &quot;치료제&quot; &quot;운동&quot; &quot;노조&quot; &quot;연휴&quot; &quot;혈전&quot; &quot;집단감염&quot; ## [5,] &quot;치매&quot; &quot;허가&quot; &quot;임신&quot; &quot;파업&quot; &quot;위드&quot; &quot;회분&quot; &quot;부산&quot; ## [6,] &quot;면제&quot; &quot;독감&quot; &quot;씨&quot; &quot;대통령&quot; &quot;천&quot; &quot;잔여&quot; &quot;경남&quot; ## [7,] &quot;활동&quot; &quot;평가&quot; &quot;건&quot; &quot;감염병&quot; &quot;비수도권&quot; &quot;연령&quot; &quot;접촉&quot; ## [8,] &quot;격리&quot; &quot;교차&quot; &quot;a&quot; &quot;요구&quot; &quot;전환&quot; &quot;간격&quot; &quot;대구&quot; ## [9,] &quot;입국&quot; &quot;형성&quot; &quot;신고&quot; &quot;휴가&quot; &quot;치명률&quot; &quot;청소년&quot; &quot;격리&quot; ## [10,] &quot;증명서&quot; &quot;식약처&quot; &quot;여성&quot; &quot;확충&quot; &quot;반장&quot; &quot;사전예약&quot; &quot;청해부대&quot; ## resp2백신 resp3병상 ## [1,] &quot;부스터&quot; &quot;병상&quot; ## [2,] &quot;부스터샷&quot; &quot;보건소&quot; ## [3,] &quot;추가접종&quot; &quot;의료기관&quot; ## [4,] &quot;이스라엘&quot; &quot;병실&quot; ## [5,] &quot;승인&quot; &quot;재택&quot; ## [6,] &quot;cdc&quot; &quot;전담&quot; ## [7,] &quot;fda&quot; &quot;이송&quot; ## [8,] &quot;의무&quot; &quot;개&quot; ## [9,] &quot;세계&quot; &quot;재택치료&quot; ## [10,] &quot;현지시간&quot; &quot;오접종&quot; c_slda$theta %&gt;% as.data.frame() -&gt; cslda_theta_df # c_corp %&gt;% docvars() -&gt; docvars_df bind_cols(docvars_df, cslda_theta_df) %&gt;% mutate(textID = row_number(), .before = ID) -&gt; slda_theta_df slda_theta_df %&gt;% glimpse() ## Rows: 14,508 ## Columns: 21 ## $ textID &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17... ## $ ID &lt;fct&gt; 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1... ## $ cat &lt;chr&gt; &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;사회&quot;, &quot;지역&quot;, &quot;지역&quot;, &quot;사회&quot;, &quot;IT_과학&quot;, &quot;사회&quot;, ... ## $ Nword &lt;int&gt; 462, 79, 114, 163, 135, 132, 172, 282, 180, 181, 263, 147... ## $ 일자 &lt;chr&gt; &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;, &quot;20211031&quot;,... ## $ text &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요” 게티이미지뱅크 연말이면 많은 병원이 건강검... ## $ 키워드 &lt;chr&gt; &quot;방콕,몸무게,심혈관질환,게티,이미지,뱅크,연말,병원,건강검진,사람들,북새통,예약,대기,사례,1일,위드,코로... ## $ 언론사 &lt;chr&gt; &quot;세계일보&quot;, &quot;국민일보&quot;, &quot;KBS&quot;, &quot;중앙일보&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;KBS&quot;, &quot;경향신문&quot;, ... ## $ URL &lt;chr&gt; &quot;http://www.segye.com/content/html/2021/10/31/20211031508... ## $ ym &lt;int&gt; 202110, 202110, 202110, 202110, 202110, 202110, 202110, 2... ## $ title &lt;chr&gt; &quot;길어진 방콕에 확 늘어난 몸무게 “심혈관질환 이상 없나요”&quot;, &quot;새에덴교회, 칼빈대 교직원에 독감 예... ## $ catSoc &lt;chr&gt; &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;사회면&quot;, &quot;비사회면&quot;, ... ## $ topic6 &lt;dbl&gt; 0.203603604, 0.415730337, 0.024390244, 0.305699482, 0.202... ## $ topic9 &lt;dbl&gt; 0.120720721, 0.213483146, 0.008130081, 0.005181347, 0.006... ## $ topic10 &lt;dbl&gt; 0.603603604, 0.011235955, 0.008130081, 0.015544041, 0.006... ## $ topic11 &lt;dbl&gt; 0.001801802, 0.033707865, 0.008130081, 0.005181347, 0.019... ## $ risk1감염 &lt;dbl&gt; 0.005405405, 0.011235955, 0.186991870, 0.419689119, 0.33333... ## $ risk3이상 &lt;dbl&gt; 0.012612613, 0.123595506, 0.008130081, 0.005181347, 0.00653... ## $ resp1검사 &lt;dbl&gt; 0.001801802, 0.101123596, 0.544715447, 0.005181347, 0.39869... ## $ resp2백신 &lt;dbl&gt; 0.048648649, 0.011235955, 0.138211382, 0.233160622, 0.01960... ## $ resp3병상 &lt;dbl&gt; 0.001801802, 0.078651685, 0.073170732, 0.005181347, 0.00653... slda_theta_df %&gt;% writexl::write_xlsx(&quot;slda_theta_df.xlsx&quot;) slda_theta_df %&gt;% select(topic6:resp3병상) %&gt;% map_dfc(sum) %&gt;% t() %&gt;% as.data.frame() %&gt;% arrange(V1 %&gt;% desc) ## V1 ## risk1감염 2668.131 ## risk3이상 2159.988 ## resp1검사 1793.471 ## resp2백신 1742.708 ## topic10 1513.007 ## topic6 1416.335 ## topic9 1120.664 ## topic11 1047.743 ## resp3병상 1045.953 slda_theta_df %&gt;% arrange(risk1감염 %&gt;% desc) %&gt;% select(title, Nword) %&gt;% head(10) ## title Nword ## 1 오늘부터 호프집 2차 되고, 추석땐 집에서 8명 모일 수 있다 290 ## 2 수도권 일평균 확진자 또 최고치 경신 접종 완료자 2000만명 돌파 226 ## 3 &#39;위드코로나&#39; 앞두고 확진자 감소 유지될까 방역당국 예의주시 312 ## 4 &quot;4차 유행 9월 중순 정점 예상 유행 안정 땐 방역체계 개편도&quot; 289 ## 5 당국 &quot;코로나 4차 대유행, 이달 중순 정점 도달한 후 감소할 듯&quot; 292 ## 6 코로나19 수도권 비중 다시 70% 돌파 . 추석 이후 비수도권 재확산 우려 199 ## 7 정은경 “접종완료율 80~90% 돼야 위드 코로나 전환” 166 ## 8 9월 확진자 방역 완화 기온 하락으로 늘까, 접종률 증가로 줄까 309 ## 9 확진자 1500명 육박 사흘 연속 요일 최대 확진자 135 ## 10 잇단 연휴에도 확진자 20% 떨어져...정부 &quot;백신 효과 나타나&quot; 148 slda_theta_df %&gt;% arrange(risk1감염 %&gt;% desc) %&gt;% select(title, Nword) %&gt;% tail(10) ## title ## 14499 [암&amp;앎] 나 스스로 조롱했던 내 몸, 원없이 사랑해보리라 ## 14500 “폐 이식, ECMO 활용하면 초기 생존율 80%까지 향상” ## 14501 “맨발 걷기, 코로나 예방 치유에 효과 있다” [양종구의 100세 시대 건강법] ## 14502 암 진단해 환자에게 치료법까지 의사들이 개발한 AI 솔루션[스타트업 리포트] ## 14503 &quot;&#39;의료관광 후진국&#39; 소리 듣는 한국, 뛰어난 의술 세계에 알려요&quot; [스타트업 리포트] ## 14504 나오데, 더블듀티 간호사의 잠 못 이루는 밤 ## 14505 고려대 구로병원, 한국 의료 산업화 이끈다 ## 14506 [청해부대 인터뷰 논란] &quot;문무대왕함은 지옥이었나?” ## 14507 [소년중앙] 안전하고 건강하게 물놀이 즐기기 위해 우리들이 꼭 알아야 하는 것들 ## 14508 코로나 시대, ‘옆 사람의 존재’ 불안해도 체온은 그립다 ## Nword ## 14499 632 ## 14500 619 ## 14501 839 ## 14502 778 ## 14503 840 ## 14504 875 ## 14505 950 ## 14506 1061 ## 14507 1066 ## 14508 1250 slda_theta_df %&gt;% arrange(risk1감염 %&gt;% desc) %&gt;% head(5) %&gt;% .$textID -&gt; id_v slda_theta_df %&gt;% filter(textID %in% id_v) %&gt;% pull(text) ## [1] &quot;&#39;위드코로나&#39; 앞두고 확진자 감소 유지될까 방역당국 예의주시 내달 초 &#39;위드(with) 코로나&#39;로의 방역체계 전환을 앞두고 국내 신종 코로나바이러스 감염증(코로나19) 신규 확진자가 감소하는 흐름을 이어가고 있다. 방역당국은 최근의 감소세를 &#39;백신 접종률 상승&#39; 효과가 본격화한 데 따른 것으로 분석하면서 감소 추세가 계속 유지될지 주시하고 있다. 19일 중앙방역대책본부(방대본)에 따르면 이날 0시 ..&quot; ## [2] &quot;수도권 일평균 확진자 또 최고치 경신 접종 완료자 2000만명 돌파 추석 연휴를 일주일 앞두고 수도권을 중심으로 코로나19 재확산세가 뚜렷해지고 있다. 대규모 인구 이동이 일어나는 연휴동안 ‘전국적 유행’으로 다시 번질 가능성도 있다. 다만 백신 접종 완료자는 2000만명을 넘어섰고, 정부가 내세운 목표치인 ‘추석 전 인구 70% 1차 접종’도 코앞으로 다가왔다. 방역당국은 백신 접종 확대 효과를 기대하면서도 이동량이 ..&quot; ## [3] &quot;오늘부터 호프집 2차 되고, 추석땐 집에서 8명 모일 수 있다 현행 사회적 거리두기 단계(수도권 4단계, 비수도권 3단계)가 6일부터 내달 3일까지 연장된다. 수도권의 경우 거리두기 최고강도인 4단계가 9주째에 접어들게 된다. 대신 정부는 카페 식당의 매장 영업시간을 오후 10시로 다시 한 시간 늦추고, 백신 접종 완료자를 포함해 6명이 모일 수 있도록 방역수칙을 완화했다. 비수도권은 최대 8명까지 모일 수 있다...&quot; ## [4] &quot;당국 \\&quot;코로나 4차 대유행, 이달 중순 정점 도달한 후 감소할 듯\\&quot; 중앙재난안전대책본부 제공 정부는 국내 신종 코로나바이러스 감염증(코로나19) 4차 대유행이 이달 중순 정점에 도달한 후 감소할 것으로 전망했다. 중앙재난안전대책본부(중대본)는 3일 현재 수준의 방역 강도를 유지하면서 코로나19 백신 접종을 확대할 경우, 이달 5 20일 사이 확진자 수가 2천 2천300여명까지 올랐다가 이후 감소할 것으로 내다봤다..&quot; ## [5] &quot;\\&quot;4차 유행 9월 중순 정점 예상 유행 안정 땐 방역체계 개편도\\&quot; 정부는 국내 신종 코로나바이러스 감염증(코로나19) 4차 대유행이 이달 중순 정점에 도달한 후 감소할 것으로 전망했다. 중앙재난안전대책본부(중대본)는 3일 현재 수준의 방역 강도를 유지하면서 코로나19 백신 접종을 확대할 경우, 이달 5 20일 사이 확진자 수가 2천 2천300여명까지 올랐다가 이후 감소할 것으로 내다봤다. 최근 4주간 일..&quot; topics()함수는 각 문서의 할당확률이 높은 주제 산출. topics(c_slda) %&gt;% head() ## [1] &quot;topic10&quot; &quot;topic6&quot; &quot;resp1검사&quot; &quot;risk1감염&quot; &quot;resp1검사&quot; &quot;resp1검사&quot; 각 주제 별로 할당 가능성이 높은 기사의 수. topics(c_slda) -&gt; slda_theta_df$topic2 slda_theta_df$topic2 %&gt;% table() %&gt;% as.data.frame() %&gt;% arrange(Freq %&gt;% desc) -&gt; topic_freq_df topic_freq_df ## . Freq ## 1 risk1감염 3071 ## 2 risk3이상 2312 ## 3 resp2백신 1871 ## 4 resp1검사 1821 ## 5 topic10 1537 ## 6 topic6 1258 ## 7 topic9 927 ## 8 resp3병상 875 ## 9 topic11 836 "]]
